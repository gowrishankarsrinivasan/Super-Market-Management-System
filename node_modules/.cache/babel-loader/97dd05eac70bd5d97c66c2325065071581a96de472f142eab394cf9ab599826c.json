{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport { useRouter } from 'vue-router';\nexport default {\n  name: 'LoginComponent',\n  data() {\n    return {\n      isLogin: true,\n      // Control whether the login or registration form is displayed\n      visible: false,\n      first: null,\n      last: null,\n      email: null,\n      password: null,\n      terms: false\n    };\n  },\n  setup() {\n    const router = useRouter();\n    return {\n      router\n    };\n  },\n  methods: {\n    toggleForm() {\n      this.isLogin = !this.isLogin; // Toggle between login and registration form\n    },\n    async login() {\n      try {\n        console.log('Email:', this.email);\n        console.log('Password:', this.password);\n        const response = await axios.get(`http://localhost:3000/users?email=${this.email}`);\n        console.log('Response data:', response.data);\n        const user = response.data[0];\n        if (user) {\n          console.log('User found:', user);\n          console.log('Stored password:', user.password);\n          console.log('Entered password:', this.password);\n          if (user.password === this.password) {\n            console.log('Login successful');\n            this.router.push('/home');\n          } else {\n            console.error('Invalid password');\n          }\n        } else {\n          console.error('Invalid email');\n        }\n      } catch (error) {\n        console.error('Error logging in:', error);\n      }\n    },\n    async register() {\n      if (!this.terms) {\n        console.error('You must agree to the terms and conditions');\n        return;\n      }\n      try {\n        // Check if the email already exists\n        const existingUser = (await axios.get(`http://localhost:3000/users?email=${this.email}`)).data;\n        if (existingUser.length > 0) {\n          console.error('Email already exists');\n          return;\n        }\n        const newUser = {\n          first: this.first,\n          last: this.last,\n          email: this.email,\n          password: this.password // Ensure the password is stored as entered\n        };\n        const response = await axios.post('http://localhost:3000/users', newUser);\n        console.log('Registration successful:', response.data);\n\n        // Optionally, switch to the login form after registration\n        this.toggleForm();\n      } catch (error) {\n        console.error('Error registering user:', error);\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","useRouter","name","data","isLogin","visible","first","last","email","password","terms","setup","router","methods","toggleForm","login","console","log","response","get","user","push","error","register","existingUser","length","newUser","post"],"sources":["D:\\E-commerce\\FrontEnd\\my-vue3-project\\src\\components\\LoginComponent.vue"],"sourcesContent":["<template>\r\n    <div class=\"d-flex justify-center align-center\" style=\"height: 100vh;\">\r\n      <v-card class=\"mx-auto pa-12 pb-8\" elevation=\"8\" max-width=\"448\" rounded=\"lg\">\r\n        <!-- Conditional Rendering for Login and Registration -->\r\n        <div v-if=\"isLogin\">\r\n          <div class=\"text-subtitle-1 text-medium-emphasis\">Account</div>\r\n  \r\n          <v-text-field \r\n            v-model=\"email\"\r\n            density=\"compact\"\r\n            placeholder=\"Email address\"\r\n            prepend-inner-icon=\"mdi-email-outline\"\r\n            variant=\"outlined\"\r\n          ></v-text-field>\r\n  \r\n          <div class=\"text-subtitle-1 text-medium-emphasis d-flex align-center justify-space-between\">\r\n            Password\r\n            <a class=\"text-caption text-decoration-none text-blue\" href=\"#\" rel=\"noopener noreferrer\" target=\"_blank\">\r\n              Forgot login password?\r\n            </a>\r\n          </div>\r\n  \r\n          <v-text-field \r\n            v-model=\"password\"\r\n            :append-inner-icon=\"visible ? 'mdi-eye-off' : 'mdi-eye'\"\r\n            :type=\"visible ? 'text' : 'password'\"\r\n            density=\"compact\"\r\n            placeholder=\"Enter your password\"\r\n            prepend-inner-icon=\"mdi-lock-outline\"\r\n            variant=\"outlined\"\r\n            @click:append-inner=\"visible = !visible\"\r\n          ></v-text-field>\r\n  \r\n          <v-card class=\"mb-12\" color=\"surface-variant\" variant=\"tonal\">\r\n            <v-card-text class=\"text-medium-emphasis text-caption\">\r\n              Warning: After 3 consecutive failed login attempts, your account will be temporarily locked for\r\n              three hours. If you must log in now, you can also click \"Forgot login password?\" below to reset the\r\n              login password.\r\n            </v-card-text>\r\n          </v-card>\r\n  \r\n          <v-btn class=\"mb-8\" color=\"blue\" size=\"large\" variant=\"tonal\" block @click=\"login\">\r\n            Log In\r\n          </v-btn>\r\n  \r\n          <v-card-text class=\"text-center\">\r\n            <a class=\"text-blue text-decoration-none\" href=\"#\" @click.prevent=\"toggleForm\">\r\n              Sign up now\r\n              <v-icon icon=\"mdi-chevron-right\"></v-icon>\r\n            </a>\r\n          </v-card-text>\r\n        </div>\r\n  \r\n        <div v-else>\r\n          <v-card-title>User Registration</v-card-title>\r\n  \r\n          <v-container>\r\n            <v-text-field v-model=\"first\" color=\"primary\" label=\"First name\" variant=\"underlined\"></v-text-field>\r\n  \r\n            <v-text-field v-model=\"last\" color=\"primary\" label=\"Last name\" variant=\"underlined\"></v-text-field>\r\n  \r\n            <v-text-field v-model=\"email\" color=\"primary\" label=\"Email\" variant=\"underlined\"></v-text-field>\r\n  \r\n            <v-text-field v-model=\"password\" color=\"primary\" label=\"Password\" placeholder=\"Enter your password\" variant=\"underlined\"></v-text-field>\r\n  \r\n            <v-checkbox v-model=\"terms\" color=\"secondary\" label=\"I agree to site terms and conditions\"></v-checkbox>\r\n          </v-container>\r\n  \r\n          <v-divider></v-divider>\r\n  \r\n          <v-card-text class=\"text-center\">\r\n            <v-btn color=\"success\" @click=\"register\">\r\n              Complete Registration\r\n              <v-icon icon=\"mdi-chevron-right\" end></v-icon>\r\n            </v-btn>\r\n          </v-card-text>\r\n  \r\n          <v-card-text class=\"text-center\">\r\n            <a class=\"text-blue text-decoration-none\" href=\"#\" @click.prevent=\"toggleForm\">\r\n              Already have an account? Log in\r\n              <v-icon icon=\"mdi-chevron-left\"></v-icon>\r\n            </a>\r\n          </v-card-text>\r\n        </div>\r\n      </v-card>\r\n    </div>\r\n  </template>\r\n  \r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport { useRouter } from 'vue-router';\r\nexport default {\r\n    name: 'LoginComponent',\r\n    data() {\r\n        return {\r\n            isLogin: true,  // Control whether the login or registration form is displayed\r\n            visible: false,\r\n            first: null,\r\n            last: null,\r\n            email: null,\r\n            password: null,\r\n            terms: false,\r\n        };\r\n    },\r\n    setup() {\r\n        const router = useRouter();\r\n        return { router };\r\n    },\r\n    methods: {\r\n        toggleForm() {\r\n            this.isLogin = !this.isLogin;  // Toggle between login and registration form\r\n        },\r\n        async login() {\r\n            try {\r\n                console.log('Email:', this.email);\r\n                console.log('Password:', this.password);\r\n\r\n                const response = await axios.get(`http://localhost:3000/users?email=${this.email}`);\r\n                console.log('Response data:', response.data);\r\n                const user = response.data[0];\r\n\r\n                if (user) {\r\n                    console.log('User found:', user);\r\n                    console.log('Stored password:', user.password);\r\n                    console.log('Entered password:', this.password);\r\n\r\n                    if (user.password === this.password) {\r\n                        console.log('Login successful');\r\n                        this.router.push('/home');\r\n                    } else {\r\n                        console.error('Invalid password');\r\n                    }\r\n                } else {\r\n                    console.error('Invalid email');\r\n                }\r\n            } catch (error) {\r\n                console.error('Error logging in:', error);\r\n            }\r\n        },\r\n\r\n        async register() {\r\n            if (!this.terms) {\r\n                console.error('You must agree to the terms and conditions');\r\n                return;\r\n            }\r\n\r\n            try {\r\n                // Check if the email already exists\r\n                const existingUser = (await axios.get(`http://localhost:3000/users?email=${this.email}`)).data;\r\n                if (existingUser.length > 0) {\r\n                    console.error('Email already exists');\r\n                    return;\r\n                }\r\n\r\n                const newUser = {\r\n                    first: this.first,\r\n                    last: this.last,\r\n                    email: this.email,\r\n                    password: this.password,  // Ensure the password is stored as entered\r\n                };\r\n\r\n                const response = await axios.post('http://localhost:3000/users', newUser);\r\n                console.log('Registration successful:', response.data);\r\n\r\n                // Optionally, switch to the login form after registration\r\n                this.toggleForm();\r\n            } catch (error) {\r\n                console.error('Error registering user:', error);\r\n            }\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* Optional: Customize styles for better UX */\r\n</style>"],"mappings":";AA0FA,OAAOA,KAAI,MAAO,OAAO;AACzB,SAASC,SAAQ,QAAS,YAAY;AACtC,eAAe;EACXC,IAAI,EAAE,gBAAgB;EACtBC,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,OAAO,EAAE,IAAI;MAAG;MAChBC,OAAO,EAAE,KAAK;MACdC,KAAK,EAAE,IAAI;MACXC,IAAI,EAAE,IAAI;MACVC,KAAK,EAAE,IAAI;MACXC,QAAQ,EAAE,IAAI;MACdC,KAAK,EAAE;IACX,CAAC;EACL,CAAC;EACDC,KAAKA,CAAA,EAAG;IACJ,MAAMC,MAAK,GAAIX,SAAS,CAAC,CAAC;IAC1B,OAAO;MAAEW;IAAO,CAAC;EACrB,CAAC;EACDC,OAAO,EAAE;IACLC,UAAUA,CAAA,EAAG;MACT,IAAI,CAACV,OAAM,GAAI,CAAC,IAAI,CAACA,OAAO,EAAG;IACnC,CAAC;IACD,MAAMW,KAAKA,CAAA,EAAG;MACV,IAAI;QACAC,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAE,IAAI,CAACT,KAAK,CAAC;QACjCQ,OAAO,CAACC,GAAG,CAAC,WAAW,EAAE,IAAI,CAACR,QAAQ,CAAC;QAEvC,MAAMS,QAAO,GAAI,MAAMlB,KAAK,CAACmB,GAAG,CAAC,qCAAqC,IAAI,CAACX,KAAK,EAAE,CAAC;QACnFQ,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEC,QAAQ,CAACf,IAAI,CAAC;QAC5C,MAAMiB,IAAG,GAAIF,QAAQ,CAACf,IAAI,CAAC,CAAC,CAAC;QAE7B,IAAIiB,IAAI,EAAE;UACNJ,OAAO,CAACC,GAAG,CAAC,aAAa,EAAEG,IAAI,CAAC;UAChCJ,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEG,IAAI,CAACX,QAAQ,CAAC;UAC9CO,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAE,IAAI,CAACR,QAAQ,CAAC;UAE/C,IAAIW,IAAI,CAACX,QAAO,KAAM,IAAI,CAACA,QAAQ,EAAE;YACjCO,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAC;YAC/B,IAAI,CAACL,MAAM,CAACS,IAAI,CAAC,OAAO,CAAC;UAC7B,OAAO;YACHL,OAAO,CAACM,KAAK,CAAC,kBAAkB,CAAC;UACrC;QACJ,OAAO;UACHN,OAAO,CAACM,KAAK,CAAC,eAAe,CAAC;QAClC;MACJ,EAAE,OAAOA,KAAK,EAAE;QACZN,OAAO,CAACM,KAAK,CAAC,mBAAmB,EAAEA,KAAK,CAAC;MAC7C;IACJ,CAAC;IAED,MAAMC,QAAQA,CAAA,EAAG;MACb,IAAI,CAAC,IAAI,CAACb,KAAK,EAAE;QACbM,OAAO,CAACM,KAAK,CAAC,4CAA4C,CAAC;QAC3D;MACJ;MAEA,IAAI;QACA;QACA,MAAME,YAAW,GAAI,CAAC,MAAMxB,KAAK,CAACmB,GAAG,CAAC,qCAAqC,IAAI,CAACX,KAAK,EAAE,CAAC,EAAEL,IAAI;QAC9F,IAAIqB,YAAY,CAACC,MAAK,GAAI,CAAC,EAAE;UACzBT,OAAO,CAACM,KAAK,CAAC,sBAAsB,CAAC;UACrC;QACJ;QAEA,MAAMI,OAAM,GAAI;UACZpB,KAAK,EAAE,IAAI,CAACA,KAAK;UACjBC,IAAI,EAAE,IAAI,CAACA,IAAI;UACfC,KAAK,EAAE,IAAI,CAACA,KAAK;UACjBC,QAAQ,EAAE,IAAI,CAACA,QAAQ,CAAG;QAC9B,CAAC;QAED,MAAMS,QAAO,GAAI,MAAMlB,KAAK,CAAC2B,IAAI,CAAC,6BAA6B,EAAED,OAAO,CAAC;QACzEV,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEC,QAAQ,CAACf,IAAI,CAAC;;QAEtD;QACA,IAAI,CAACW,UAAU,CAAC,CAAC;MACrB,EAAE,OAAOQ,KAAK,EAAE;QACZN,OAAO,CAACM,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;MACnD;IACJ;EACJ;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}